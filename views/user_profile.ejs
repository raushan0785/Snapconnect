<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/user_profile.css">
</head>
<body>
    <h1>Codeial / Profile Page</h1>

    <% if (profile_user) { %> <!-- Check if profile_user is defined -->
        <h2><%= profile_user.name %>'s Profile</h2>
        <p>Email: <%= profile_user.email %></p>
        <ul>
            <!-- Link to the current user's profile with their ID -->
            <li>
                <a href="/users/profile/<%= profile_user.id %>"><%= profile_user.name %></a>
            </li>
            <% if (user && user.id === profile_user.id) { %>
                <!-- Show the form if the logged-in user matches the profile_user -->
                <form action="/users/update/<%= profile_user.id %>" method="POST">
                    <input type="text" name="name" placeholder="Your Name" value="<%= profile_user.name %>" required>
                    <input type="email" name="email" placeholder="Your Email" value="<%= profile_user.email %>" required>
                    <input type="submit" value="Update">
                </form>
            <% } %> <!-- End of form display logic -->
            <li>
                <a href="/users/sign-out">Sign Out</a>
            </li>
        </ul>
    <% } else { %>
        <p>User profile not found.</p>
        <ul>
            <li><a href="/users/sign-in">Sign In</a></li>
            <li><a href="/users/sign-up">Sign Up</a></li>
        </ul>
    <% } %>

</body>
</html>
